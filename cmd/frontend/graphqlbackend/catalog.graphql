extend type Query {
    """
    [WIP]
    """
    catalog: Catalog!
    catalogComponent(name: String!): CatalogComponent
}

type Catalog {
    components(query: String, first: Int, after: String): CatalogComponentConnection!
}

type CatalogComponentConnection {
    nodes: [CatalogComponent!]!
    totalCount: Int!
    pageInfo: PageInfo!
}

enum CatalogComponentKind {
    SERVICE
    WEBSITE
    LIBRARY
    TOOL
    OTHER
}

type CatalogComponent implements Node {
    id: ID!
    kind: CatalogComponentKind!
    name: String!
    description: String
    owner: Person
    system: String
    tags: [String!]!
    url: String!
    sourceLocations: [TreeEntry!]!
    readme: File2
    commits(first: Int): GitCommitConnection
    authors: [CatalogComponentAuthorEdge!]
    usage(query: String): CatalogComponentUsage
    api(query: String): CatalogComponentAPI
}

type CatalogComponentAuthorEdge {
    component: CatalogComponent!
    person: Person!
    authoredLineCount: Int!
    authoredLineProportion: Float!
    lastCommit: GitCommit!
}

type CatalogComponentUsage {
    locations: LocationConnection
    people: [CatalogComponentUsedByPersonEdge!]!
    components: [CatalogComponentUsedByComponentEdge!]!
}

type CatalogComponentUsedByPersonEdge {
    node: Person!
    locations: LocationConnection!
    authoredLineCount: Int!
    lastCommit: GitCommit!
}

type CatalogComponentUsedByComponentEdge {
    """
    A component that uses the query parent's component.
    """
    node: CatalogComponent!
    locations: LocationConnection!
}

type CatalogComponentAPI {
    symbols(first: Int): SymbolConnection!
    schema: File2
}
